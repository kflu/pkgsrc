$NetBSD: patch-configure,v 1.9 2023/04/07 09:15:55 adam Exp $

Fix unportable test(1) operator.

Detect presence of getrandom(2). https://dev.gnupg.org/T6442

--- configure.orig	2023-04-06 19:07:18.000000000 +0000
+++ configure
@@ -18444,7 +18444,7 @@ CFLAGS="$CFLAGS -maltivec -mvsx -mcrypto
 
 if test "$gcry_cv_cc_ppc_altivec" = "no" &&
     test "$mpi_cpu_arch" = "ppc" &&
-    test "$try_asm_modules" == "yes" ; then
+    test "$try_asm_modules" = "yes" ; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether compiler supports PowerPC AltiVec/VSX/crypto intrinsics with extra GCC flags" >&5
 $as_echo_n "checking whether compiler supports PowerPC AltiVec/VSX/crypto intrinsics with extra GCC flags... " >&6; }
 if ${gcry_cv_cc_ppc_altivec_cflags+:} false; then :
@@ -18809,7 +18809,7 @@ _ACEOF
 fi
 done
 
-for ac_func in explicit_bzero explicit_memset getentropy
+for ac_func in explicit_bzero explicit_memset getentropy getrandom
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
